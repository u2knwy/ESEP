<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="999px" preserveAspectRatio="none" style="width:1059px;height:999px;background:#FFFFFF;" version="1.1" viewBox="0 0 1059 999" width="1059px" zoomAndPan="magnify"><defs/><g><!--MD5=[ac13618b1a974308c1f12eb6c57723dc]
class Event--><g id="elem_Event"><rect codeLine="2" fill="#F1F1F1" height="83.2188" id="Event" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="353.5" y="51"/><ellipse cx="387.85" cy="67" fill="#F1F1F1" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M385.9594,71.5625 Q385.7406,71.8281 385.6,71.9063 Q385.4594,71.9844 385.2719,71.9844 Q384.8813,71.9844 384.6313,71.7188 Q384.3969,71.4531 384.3969,70.8594 L384.3969,69.7031 Q384.3969,69.0938 384.6313,68.8438 Q384.8813,68.5781 385.2719,68.5781 Q385.5688,68.5781 385.7719,68.7344 Q385.975,68.8906 386.0844,69.2656 Q386.1938,69.625 386.3031,69.7656 Q386.5531,70.0156 387.1625,70.2813 Q387.7719,70.5469 388.5063,70.5469 Q389.6469,70.5469 390.3656,70.0156 Q390.8344,69.6875 390.8344,69.2188 Q390.8344,68.9063 390.6156,68.625 Q390.3969,68.3438 389.8813,68.1719 Q389.5531,68.0469 388.3969,67.8281 Q387.0063,67.5625 386.2875,67.2031 Q385.5688,66.8438 385.1469,66.1875 Q384.7406,65.5156 384.7406,64.7344 Q384.7406,63.5156 385.7563,62.6094 Q386.7875,61.6875 388.4281,61.6875 Q389.0844,61.6875 389.6313,61.8281 Q390.1938,61.9688 390.6625,62.2656 Q390.9906,61.9531 391.3188,61.9531 Q391.6938,61.9531 391.9281,62.2188 Q392.1625,62.4688 392.1625,63.0781 L392.1625,64.3594 Q392.1625,64.9688 391.9281,65.2344 Q391.6938,65.4844 391.3188,65.4844 Q391.0063,65.4844 390.7719,65.2969 Q390.5844,65.1563 390.4906,64.7344 Q390.4125,64.3125 390.2719,64.125 Q390.0219,63.8125 389.5375,63.6094 Q389.0688,63.3906 388.4281,63.3906 Q387.5063,63.3906 386.975,63.8125 Q386.4438,64.2344 386.4438,64.7031 Q386.4438,65.0156 386.6625,65.3125 Q386.8813,65.6094 387.3031,65.7813 Q387.5844,65.8906 388.8813,66.1563 Q390.1938,66.4063 390.8969,66.7188 Q391.6,67.0156 392.0688,67.6719 Q392.5375,68.3281 392.5375,69.2344 Q392.5375,70.5 391.6469,71.25 Q390.4594,72.25 388.6313,72.25 Q387.9281,72.25 387.2563,72.0781 Q386.6,71.9063 385.9594,71.5625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="406.15" y="72.7285">Event</text><line style="stroke:#181818;stroke-width:0.5;" x1="354.5" x2="463.5" y1="83" y2="83"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="359.5" y="101.5332">EventType type</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="359.5" y="119.1426">int data</text><line style="stroke:#181818;stroke-width:0.5;" x1="354.5" x2="463.5" y1="126.2188" y2="126.2188"/></g><!--MD5=[51255159981deef4d2967e1585ccf960]
class EventType--><g id="elem_EventType"><rect codeLine="7" fill="#F1F1F1" height="171.2656" id="EventType" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="500" y="7"/><ellipse cx="528.5" cy="23" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M527.3594,23.7969 L527.3594,26.2969 L531.6875,26.2969 L531.6875,25.375 Q531.6875,24.7656 531.9219,24.5 Q532.1719,24.2344 532.5469,24.2344 Q532.9219,24.2344 533.1563,24.5 Q533.3906,24.7656 533.3906,25.375 L533.3906,28 L525.3906,28 Q524.7656,28 524.5,27.7656 Q524.25,27.5313 524.25,27.1406 Q524.25,26.7656 524.5156,26.5313 Q524.7813,26.2969 525.3906,26.2969 L525.6563,26.2969 L525.6563,19.6406 L525.3906,19.6406 Q524.7656,19.6406 524.5,19.4063 Q524.25,19.1719 524.25,18.7813 Q524.25,18.4063 524.5,18.1719 Q524.7656,17.9375 525.3906,17.9375 L533.0156,17.9375 L533.0156,20.5313 Q533.0156,21.1406 532.7813,21.4063 Q532.5625,21.6563 532.1719,21.6563 Q531.7969,21.6563 531.5625,21.4063 Q531.3281,21.1406 531.3281,20.5313 L531.3281,19.6406 L527.3594,19.6406 L527.3594,22.0938 L528.8438,22.0938 Q528.8438,21.4375 528.9688,21.25 Q529.2344,20.8438 529.7031,20.8438 Q530.0781,20.8438 530.3125,21.1094 Q530.5469,21.3594 530.5469,21.9688 L530.5469,23.9375 Q530.5469,24.4844 530.4219,24.6719 Q530.1563,25.0625 529.7031,25.0625 Q529.2344,25.0625 528.9688,24.6563 Q528.8438,24.4688 528.8438,23.7969 L527.3594,23.7969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="545.5" y="28.7285">EventType</text><line style="stroke:#181818;stroke-width:0.5;" x1="501" x2="629" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="506" y="57.5332">START_X_SHORT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="506" y="75.1426">START_X_LONG</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="506" y="92.752">STOP_X_SHORT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="506" y="110.3613">...</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="506" y="127.9707">LBA_X_BLOCKED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="506" y="145.5801">MD_X_PAYLOAD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="506" y="163.1895">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="501" x2="629" y1="170.2656" y2="170.2656"/></g><!--MD5=[99e5d0319d94059708e42fb64bcac062]
class EventManager--><g id="elem_EventManager"><rect codeLine="19" fill="#F1F1F1" height="171.2656" id="EventManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="428" x="260" y="628"/><ellipse cx="423.75" cy="644" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M426.5156,639.875 Q426.6719,639.6563 426.8594,639.5469 Q427.0469,639.4375 427.2656,639.4375 Q427.6406,639.4375 427.875,639.7031 Q428.1094,639.9531 428.1094,640.5625 L428.1094,642.0156 Q428.1094,642.625 427.875,642.8906 Q427.6406,643.1563 427.2656,643.1563 Q426.9219,643.1563 426.7188,642.9531 Q426.5156,642.7656 426.4063,642.25 Q426.3594,641.8906 426.1719,641.7031 Q425.8438,641.3281 425.2344,641.1094 Q424.625,640.8906 424,640.8906 Q423.2344,640.8906 422.5938,641.2188 Q421.9688,641.5469 421.4688,642.2969 Q420.9844,643.0469 420.9844,644.0781 L420.9844,645.1719 Q420.9844,646.4063 421.875,647.2344 Q422.7656,648.0469 424.3594,648.0469 Q425.2969,648.0469 425.9531,647.7969 Q426.3438,647.6406 426.7656,647.2031 Q427.0313,646.9375 427.1719,646.8594 Q427.3281,646.7813 427.5313,646.7813 Q427.8594,646.7813 428.1094,647.0469 Q428.375,647.2969 428.375,647.6406 Q428.375,647.9844 428.0313,648.3906 Q427.5313,648.9688 426.7344,649.2969 Q425.6563,649.75 424.3594,649.75 Q422.8438,649.75 421.6406,649.125 Q420.6563,648.625 419.9688,647.5625 Q419.2813,646.4844 419.2813,645.2031 L419.2813,644.0469 Q419.2813,642.7188 419.8906,641.5781 Q420.5156,640.4219 421.6094,639.8125 Q422.7031,639.1875 423.9375,639.1875 Q424.6719,639.1875 425.3125,639.3594 Q425.9688,639.5156 426.5156,639.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="444.25" y="649.7285">EventManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="261" x2="687" y1="660" y2="660"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="268" y="671.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="280" y="678.5332">int channelID</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="268" y="688.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="402" x="280" y="696.1426">std::map&lt;EventType, std::vector&lt;IEventHandler&amp;&gt;&gt; subscribers</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="268" y="706.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="280" y="713.752">ILogger logger</text><line style="stroke:#181818;stroke-width:0.5;" x1="261" x2="687" y1="720.8281" y2="720.8281"/><ellipse cx="271" cy="735.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="303" x="280" y="739.3613">subscribe(Event event, IEventHandler&amp; handler)</text><ellipse cx="271" cy="752.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306" x="280" y="756.9707">unregister(Event event, IEventHandler&amp; handler)</text><ellipse cx="271" cy="770.3516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="280" y="774.5801">sendEvent(Event event)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="268" y="784.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="280" y="792.1895">receiveLoop()</text></g><!--MD5=[248f897e4bb16c2722904b15df30346f]
class Logger--><g id="elem_Logger"><rect codeLine="61" fill="#F1F1F1" height="153.6563" id="Logger" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="204" x="723" y="636.5"/><ellipse cx="798.25" cy="652.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M801.0156,648.375 Q801.1719,648.1563 801.3594,648.0469 Q801.5469,647.9375 801.7656,647.9375 Q802.1406,647.9375 802.375,648.2031 Q802.6094,648.4531 802.6094,649.0625 L802.6094,650.5156 Q802.6094,651.125 802.375,651.3906 Q802.1406,651.6563 801.7656,651.6563 Q801.4219,651.6563 801.2188,651.4531 Q801.0156,651.2656 800.9063,650.75 Q800.8594,650.3906 800.6719,650.2031 Q800.3438,649.8281 799.7344,649.6094 Q799.125,649.3906 798.5,649.3906 Q797.7344,649.3906 797.0938,649.7188 Q796.4688,650.0469 795.9688,650.7969 Q795.4844,651.5469 795.4844,652.5781 L795.4844,653.6719 Q795.4844,654.9063 796.375,655.7344 Q797.2656,656.5469 798.8594,656.5469 Q799.7969,656.5469 800.4531,656.2969 Q800.8438,656.1406 801.2656,655.7031 Q801.5313,655.4375 801.6719,655.3594 Q801.8281,655.2813 802.0313,655.2813 Q802.3594,655.2813 802.6094,655.5469 Q802.875,655.7969 802.875,656.1406 Q802.875,656.4844 802.5313,656.8906 Q802.0313,657.4688 801.2344,657.7969 Q800.1563,658.25 798.8594,658.25 Q797.3438,658.25 796.1406,657.625 Q795.1563,657.125 794.4688,656.0625 Q793.7813,654.9844 793.7813,653.7031 L793.7813,652.5469 Q793.7813,651.2188 794.3906,650.0781 Q795.0156,648.9219 796.1094,648.3125 Q797.2031,647.6875 798.4375,647.6875 Q799.1719,647.6875 799.8125,647.8594 Q800.4688,648.0156 801.0156,648.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="818.75" y="658.2285">Logger</text><line style="stroke:#181818;stroke-width:0.5;" x1="724" x2="926" y1="668.5" y2="668.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="731" y="679.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="743" y="687.0332">LogLevel level</text><line style="stroke:#181818;stroke-width:0.5;" x1="724" x2="926" y1="694.1094" y2="694.1094"/><ellipse cx="734" cy="708.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="743" y="712.6426">setLogLevel(LogLevel level)</text><ellipse cx="734" cy="726.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="743" y="730.252">debug(std::string msg)</text><ellipse cx="734" cy="743.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="743" y="747.8613">info(std::string msg)</text><ellipse cx="734" cy="761.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="743" y="765.4707">warning(std::string msg)</text><ellipse cx="734" cy="778.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="743" y="783.0801">error(std::string msg)</text></g><!--MD5=[74026ca718864ade72d8a12fd1b4e377]
class Watchdog--><g id="elem_Watchdog"><rect codeLine="31" fill="#F1F1F1" height="100.8281" id="Watchdog" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="218" x="267" y="255.5"/><ellipse cx="339.75" cy="271.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M342.5156,267.375 Q342.6719,267.1563 342.8594,267.0469 Q343.0469,266.9375 343.2656,266.9375 Q343.6406,266.9375 343.875,267.2031 Q344.1094,267.4531 344.1094,268.0625 L344.1094,269.5156 Q344.1094,270.125 343.875,270.3906 Q343.6406,270.6563 343.2656,270.6563 Q342.9219,270.6563 342.7188,270.4531 Q342.5156,270.2656 342.4063,269.75 Q342.3594,269.3906 342.1719,269.2031 Q341.8438,268.8281 341.2344,268.6094 Q340.625,268.3906 340,268.3906 Q339.2344,268.3906 338.5938,268.7188 Q337.9688,269.0469 337.4688,269.7969 Q336.9844,270.5469 336.9844,271.5781 L336.9844,272.6719 Q336.9844,273.9063 337.875,274.7344 Q338.7656,275.5469 340.3594,275.5469 Q341.2969,275.5469 341.9531,275.2969 Q342.3438,275.1406 342.7656,274.7031 Q343.0313,274.4375 343.1719,274.3594 Q343.3281,274.2813 343.5313,274.2813 Q343.8594,274.2813 344.1094,274.5469 Q344.375,274.7969 344.375,275.1406 Q344.375,275.4844 344.0313,275.8906 Q343.5313,276.4688 342.7344,276.7969 Q341.6563,277.25 340.3594,277.25 Q338.8438,277.25 337.6406,276.625 Q336.6563,276.125 335.9688,275.0625 Q335.2813,273.9844 335.2813,272.7031 L335.2813,271.5469 Q335.2813,270.2188 335.8906,269.0781 Q336.5156,267.9219 337.6094,267.3125 Q338.7031,266.6875 339.9375,266.6875 Q340.6719,266.6875 341.3125,266.8594 Q341.9688,267.0156 342.5156,267.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="360.25" y="277.2285">Watchdog</text><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="484" y1="287.5" y2="287.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="298.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="287" y="306.0332">EventManager* eventManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="484" y1="313.1094" y2="313.1094"/><ellipse cx="278" cy="327.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="287" y="331.6426">notify(Event event)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="342.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="287" y="349.252">sendHeartbeatLoop()</text></g><!--MD5=[8574b24f32bb9fcb0a100948d7d93e6b]
class IEventHandler--><g id="elem_IEventHandler"><rect codeLine="40" fill="#F1F1F1" height="65.6094" id="IEventHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="173.5" y="59.5"/><ellipse cx="199.3" cy="75.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M200.2531,72.1406 L200.2531,78.7969 L201.9719,78.7969 Q202.5813,78.7969 202.8469,79.0313 Q203.1125,79.2656 203.1125,79.6563 Q203.1125,80.0313 202.8469,80.2656 Q202.5813,80.5 201.9719,80.5 L196.8313,80.5 Q196.2219,80.5 195.9563,80.2656 Q195.6906,80.0313 195.6906,79.6406 Q195.6906,79.2656 195.9563,79.0313 Q196.2219,78.7969 196.8313,78.7969 L198.55,78.7969 L198.55,72.1406 L196.8313,72.1406 Q196.2219,72.1406 195.9563,71.9063 Q195.6906,71.6719 195.6906,71.2813 Q195.6906,70.9063 195.9563,70.6719 Q196.2219,70.4375 196.8313,70.4375 L201.9719,70.4375 Q202.5813,70.4375 202.8469,70.6719 Q203.1125,70.9063 203.1125,71.2813 Q203.1125,71.6719 202.8469,71.9063 Q202.5813,72.1406 201.9719,72.1406 L200.2531,72.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="215.7" y="81.2285">IEventHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="174.5" x2="317.5" y1="91.5" y2="91.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="174.5" x2="317.5" y1="99.5" y2="99.5"/><polygon fill="#FFFF44" points="184.5,108.8047,188.5,112.8047,184.5,116.8047,180.5,112.8047" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="193.5" y="118.0332">notify(Event event)</text></g><!--MD5=[fde78261c83df273810042a88c770c4d]
class LogLevel--><g id="elem_LogLevel"><rect codeLine="44" fill="#F1F1F1" height="118.4375" id="LogLevel" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="962" y="247"/><ellipse cx="977" cy="263" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M975.8594,263.7969 L975.8594,266.2969 L980.1875,266.2969 L980.1875,265.375 Q980.1875,264.7656 980.4219,264.5 Q980.6719,264.2344 981.0469,264.2344 Q981.4219,264.2344 981.6563,264.5 Q981.8906,264.7656 981.8906,265.375 L981.8906,268 L973.8906,268 Q973.2656,268 973,267.7656 Q972.75,267.5313 972.75,267.1406 Q972.75,266.7656 973.0156,266.5313 Q973.2813,266.2969 973.8906,266.2969 L974.1563,266.2969 L974.1563,259.6406 L973.8906,259.6406 Q973.2656,259.6406 973,259.4063 Q972.75,259.1719 972.75,258.7813 Q972.75,258.4063 973,258.1719 Q973.2656,257.9375 973.8906,257.9375 L981.5156,257.9375 L981.5156,260.5313 Q981.5156,261.1406 981.2813,261.4063 Q981.0625,261.6563 980.6719,261.6563 Q980.2969,261.6563 980.0625,261.4063 Q979.8281,261.1406 979.8281,260.5313 L979.8281,259.6406 L975.8594,259.6406 L975.8594,262.0938 L977.3438,262.0938 Q977.3438,261.4375 977.4688,261.25 Q977.7344,260.8438 978.2031,260.8438 Q978.5781,260.8438 978.8125,261.1094 Q979.0469,261.3594 979.0469,261.9688 L979.0469,263.9375 Q979.0469,264.4844 978.9219,264.6719 Q978.6563,265.0625 978.2031,265.0625 Q977.7344,265.0625 977.4688,264.6563 Q977.3438,264.4688 977.3438,263.7969 L975.8594,263.7969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="991" y="268.7285">LogLevel</text><line style="stroke:#181818;stroke-width:0.5;" x1="963" x2="1051" y1="279" y2="279"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="968" y="297.5332">DEBUG</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="968" y="315.1426">INFO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="968" y="332.752">WARNING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="968" y="350.3613">ERROR</text><line style="stroke:#181818;stroke-width:0.5;" x1="963" x2="1051" y1="357.4375" y2="357.4375"/></g><!--MD5=[9c3f40dd4d806dc4ecc502a287ec37eb]
class ILogger--><g id="elem_ILogger"><rect codeLine="51" fill="#F1F1F1" height="136.0469" id="ILogger" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="204" x="723" y="238"/><ellipse cx="796.25" cy="254" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M797.2031,250.6406 L797.2031,257.2969 L798.9219,257.2969 Q799.5313,257.2969 799.7969,257.5313 Q800.0625,257.7656 800.0625,258.1563 Q800.0625,258.5313 799.7969,258.7656 Q799.5313,259 798.9219,259 L793.7813,259 Q793.1719,259 792.9063,258.7656 Q792.6406,258.5313 792.6406,258.1406 Q792.6406,257.7656 792.9063,257.5313 Q793.1719,257.2969 793.7813,257.2969 L795.5,257.2969 L795.5,250.6406 L793.7813,250.6406 Q793.1719,250.6406 792.9063,250.4063 Q792.6406,250.1719 792.6406,249.7813 Q792.6406,249.4063 792.9063,249.1719 Q793.1719,248.9375 793.7813,248.9375 L798.9219,248.9375 Q799.5313,248.9375 799.7969,249.1719 Q800.0625,249.4063 800.0625,249.7813 Q800.0625,250.1719 799.7969,250.4063 Q799.5313,250.6406 798.9219,250.6406 L797.2031,250.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49" x="816.75" y="259.7285">ILogger</text><line style="stroke:#181818;stroke-width:0.5;" x1="724" x2="926" y1="270" y2="270"/><line style="stroke:#181818;stroke-width:0.5;" x1="724" x2="926" y1="278" y2="278"/><polygon fill="#FFFF44" points="734,287.3047,738,291.3047,734,295.3047,730,291.3047" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="743" y="296.5332">setLogLevel(LogLevel level)</text><polygon fill="#FFFF44" points="734,304.9141,738,308.9141,734,312.9141,730,308.9141" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="743" y="314.1426">debug(std::string msg)</text><polygon fill="#FFFF44" points="734,322.5234,738,326.5234,734,330.5234,730,326.5234" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="743" y="331.752">info(std::string msg)</text><polygon fill="#FFFF44" points="734,340.1328,738,344.1328,734,348.1328,730,344.1328" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="743" y="349.3613">warning(std::string msg)</text><polygon fill="#FFFF44" points="734,357.7422,738,361.7422,734,365.7422,730,361.7422" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="743" y="366.9707">error(std::string msg)</text></g><!--MD5=[be3765a8ee426731c4981c30c0d20f09]
class HAL--><g id="elem_HAL"><rect codeLine="73" fill="#F1F1F1" height="558.6719" id="HAL" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="218" x="7" y="434"/><ellipse cx="98.75" cy="450" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M101.5156,445.875 Q101.6719,445.6563 101.8594,445.5469 Q102.0469,445.4375 102.2656,445.4375 Q102.6406,445.4375 102.875,445.7031 Q103.1094,445.9531 103.1094,446.5625 L103.1094,448.0156 Q103.1094,448.625 102.875,448.8906 Q102.6406,449.1563 102.2656,449.1563 Q101.9219,449.1563 101.7188,448.9531 Q101.5156,448.7656 101.4063,448.25 Q101.3594,447.8906 101.1719,447.7031 Q100.8438,447.3281 100.2344,447.1094 Q99.625,446.8906 99,446.8906 Q98.2344,446.8906 97.5938,447.2188 Q96.9688,447.5469 96.4688,448.2969 Q95.9844,449.0469 95.9844,450.0781 L95.9844,451.1719 Q95.9844,452.4063 96.875,453.2344 Q97.7656,454.0469 99.3594,454.0469 Q100.2969,454.0469 100.9531,453.7969 Q101.3438,453.6406 101.7656,453.2031 Q102.0313,452.9375 102.1719,452.8594 Q102.3281,452.7813 102.5313,452.7813 Q102.8594,452.7813 103.1094,453.0469 Q103.375,453.2969 103.375,453.6406 Q103.375,453.9844 103.0313,454.3906 Q102.5313,454.9688 101.7344,455.2969 Q100.6563,455.75 99.3594,455.75 Q97.8438,455.75 96.6406,455.125 Q95.6563,454.625 94.9688,453.5625 Q94.2813,452.4844 94.2813,451.2031 L94.2813,450.0469 Q94.2813,448.7188 94.8906,447.5781 Q95.5156,446.4219 96.6094,445.8125 Q97.7031,445.1875 98.9375,445.1875 Q99.6719,445.1875 100.3125,445.3594 Q100.9688,445.5156 101.5156,445.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="119.25" y="455.7285">HAL</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="224" y1="466" y2="466"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="477.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="27" y="484.5332">EventManager* eventManager</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="494.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="27" y="502.1426">int evmConnectionId</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="512.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="27" y="519.752">ADC adc</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="530.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="27" y="537.3613">int adcChannel</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="547.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="27" y="554.9707">std::thread adcLoop</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="565.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="27" y="572.5801">bool adcLoopRunning</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="582.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="27" y="590.1895">int eventLoopChannel</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="600.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="27" y="607.7988">std::thread eventLoop</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="618.1797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="27" y="625.4082">bool eventLoopRunning</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="224" y1="632.4844" y2="632.4844"/><ellipse cx="18" cy="646.7891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="27" y="651.0176">notify(Event event)</text><ellipse cx="18" cy="664.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="27" y="668.627">greenLampOn()</text><ellipse cx="18" cy="682.0078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="27" y="686.2363">greenLampOff()</text><ellipse cx="18" cy="699.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="27" y="703.8457">yellowLampOn()</text><ellipse cx="18" cy="717.2266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="27" y="721.4551">yellowLampOff()</text><ellipse cx="18" cy="734.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="739.0645">redLampOn()</text><ellipse cx="18" cy="752.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="756.6738">redLampOff()</text><ellipse cx="18" cy="770.0547" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="27" y="774.2832">startLedOn()</text><ellipse cx="18" cy="787.6641" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="27" y="791.8926">startLedOff()</text><ellipse cx="18" cy="805.2734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="809.502">resetLedOn()</text><ellipse cx="18" cy="822.8828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="827.1113">resetLedOff()</text><ellipse cx="18" cy="840.4922" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="27" y="844.7207">q1LedOn()</text><ellipse cx="18" cy="858.1016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="27" y="862.3301">q1LedOff()</text><ellipse cx="18" cy="875.7109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="27" y="879.9395">q2LedOn()</text><ellipse cx="18" cy="893.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="27" y="897.5488">q2LedOff()</text><ellipse cx="18" cy="910.9297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="27" y="915.1582">motorStop()</text><ellipse cx="18" cy="928.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="27" y="932.7676">motorRightFast()</text><ellipse cx="18" cy="946.1484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="27" y="950.377">motorRightSlow()</text><ellipse cx="18" cy="963.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="27" y="967.9863">openSwitch()</text><ellipse cx="18" cy="981.3672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="27" y="985.5957">closeSwitch()</text></g><!--MD5=[f290c1d6237d5fb8b48f3fa1aaee299f]
reverse link Event to EventType--><g id="link_Event_EventType"><path codeLine="17" d="M477.97,92.5 C485.32,92.5 492.66,92.5 500,92.5 " fill="none" id="Event-backto-EventType" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="464.76,92.5,470.76,96.5,476.76,92.5,470.76,88.5,464.76,92.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6a80d49b7986288883824c8092d90605]
reverse link EventManager to Logger--><g id="link_EventManager_Logger"><path codeLine="29" d="M701.26,713.5 C708.49,713.5 715.72,713.5 722.96,713.5 " fill="none" id="EventManager-backto-Logger" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="688.23,713.5,694.23,717.5,700.23,713.5,694.23,709.5,688.23,713.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7708b745a519b9dd1a4be2a64ec746a8]
reverse link Watchdog to EventManager--><g id="link_Watchdog_EventManager"><path codeLine="37" d="M391.12,369.55 C407.84,438.75 434.89,550.66 453.51,627.71 " fill="none" id="Watchdog-backto-EventManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="388.02,356.72,385.544,363.4927,390.8434,368.3831,393.3194,361.6104,388.02,356.72" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[dea191f0231dcfff7c1ff5bcc8381f1b]
reverse link IEventHandler to Watchdog--><g id="link_IEventHandler_Watchdog"><path codeLine="38" d="M276.23,142.67 C297.02,176.5 324.54,221.28 345.41,255.23 " fill="none" id="IEventHandler-backto-Watchdog" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="270.25,146.33,265.74,125.62,282.18,139,270.25,146.33" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[0549bcaaaac2d893b9a0c23e01fab8a4]
reverse link ILogger to LogLevel--><g id="link_ILogger_LogLevel"><path codeLine="59" d="M940.02,306 C947.25,306 954.47,306 961.7,306 " fill="none" id="ILogger-backto-LogLevel" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="927.02,306,933.02,310,939.02,306,933.02,302,927.02,306" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ca7752c0e55983a9bb21a6491a7d2070]
reverse link ILogger to Logger--><g id="link_ILogger_Logger"><path codeLine="69" d="M825,394.83 C825,466.82 825,567.66 825,636.28 " fill="none" id="ILogger-backto-Logger" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="818,394.42,825,374.42,832,394.42,818,394.42" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[80fc126002394a0ad96b7e7f08bc6872]
link IEventHandler to Event--><g id="link_IEventHandler_Event"><path codeLine="71" d="M318.59,92.5 C330.12,92.5 341.66,92.5 353.2,92.5 " fill="none" id="IEventHandler-Event" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[4158b7762577f54ac6dbfffcddc5414e]
reverse link IEventHandler to HAL--><g id="link_IEventHandler_HAL"><path codeLine="105" d="M235.03,145.76 C221.5,210.17 197.48,324.54 174.54,433.75 " fill="none" id="IEventHandler-backto-HAL" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="228.23,144.04,239.19,125.91,241.93,146.92,228.23,144.04" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b7436e7b9a0931f05eb458171361227a]
reverse link HAL to EventManager--><g id="link_HAL_EventManager"><path codeLine="106" d="M238.29,713.5 C245.39,713.5 252.5,713.5 259.6,713.5 " fill="none" id="HAL-backto-EventManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="225.08,713.5,231.08,717.5,237.08,713.5,231.08,709.5,225.08,713.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d6b393f275097956702ac8e252c56911]
@startuml

struct Event {
  EventType type
  int data
}

enum EventType {
  START_X_SHORT
  START_X_LONG
  STOP_X_SHORT
  ...
  LBA_X_BLOCKED
  MD_X_PAYLOAD
  ...
}

Event *- EventType

class EventManager {
  -int channelID
  -std::map<EventType, std::vector<IEventHandler&>> subscribers
  -ILogger logger
  +subscribe(Event event, IEventHandler& handler)
  +unregister(Event event, IEventHandler& handler)
  +sendEvent(Event event)
  -receiveLoop()
}

EventManager o- Logger

class Watchdog {
  -EventManager* eventManager
  +notify(Event event)
  -sendHeartbeatLoop()
}

Watchdog o- - EventManager
IEventHandler <|.. Watchdog

interface IEventHandler {
  #notify(Event event)
}

enum LogLevel {
  DEBUG
  INFO
  WARNING
  ERROR
}

interface ILogger {
  #setLogLevel(LogLevel level)
  #debug(std::string msg)
  #info(std::string msg)
  #warning(std::string msg)
  #error(std::string msg)
}

ILogger *- LogLevel

class Logger {
  -LogLevel level
  +setLogLevel(LogLevel level)
  +debug(std::string msg)
  +info(std::string msg)
  +warning(std::string msg)
  +error(std::string msg)
}
ILogger <|.. Logger

IEventHandler . Event

class HAL {
  -EventManager* eventManager
  -int evmConnectionId
  -ADC adc
  -int adcChannel
  -std::thread adcLoop
  -bool adcLoopRunning
  -int eventLoopChannel
  -std::thread eventLoop
  -bool eventLoopRunning
  +notify(Event event)
  +greenLampOn()
  +greenLampOff()
  +yellowLampOn()
  +yellowLampOff()
  +redLampOn()
  +redLampOff()
  +startLedOn()
  +startLedOff()
  +resetLedOn()
  +resetLedOff()
  +q1LedOn()
  +q1LedOff()
  +q2LedOn()
  +q2LedOff()
  +motorStop()
  +motorRightFast()
  +motorRightSlow()
  +openSwitch()
  +closeSwitch()
}

IEventHandler <|.. HAL
HAL o- EventManager

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>