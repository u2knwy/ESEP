<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1360px" preserveAspectRatio="none" style="width:1567px;height:1360px;background:#FFFFFF;" version="1.1" viewBox="0 0 1567 1360" width="1567px" zoomAndPan="magnify"><defs/><g><!--MD5=[8574b24f32bb9fcb0a100948d7d93e6b]
class IEventHandler--><g id="elem_IEventHandler"><rect codeLine="1" fill="#F1F1F1" height="65.6094" id="IEventHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="458.5" y="7"/><ellipse cx="504.75" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M505.7031,19.6406 L505.7031,26.2969 L507.4219,26.2969 Q508.0313,26.2969 508.2969,26.5313 Q508.5625,26.7656 508.5625,27.1563 Q508.5625,27.5313 508.2969,27.7656 Q508.0313,28 507.4219,28 L502.2813,28 Q501.6719,28 501.4063,27.7656 Q501.1406,27.5313 501.1406,27.1406 Q501.1406,26.7656 501.4063,26.5313 Q501.6719,26.2969 502.2813,26.2969 L504,26.2969 L504,19.6406 L502.2813,19.6406 Q501.6719,19.6406 501.4063,19.4063 Q501.1406,19.1719 501.1406,18.7813 Q501.1406,18.4063 501.4063,18.1719 Q501.6719,17.9375 502.2813,17.9375 L507.4219,17.9375 Q508.0313,17.9375 508.2969,18.1719 Q508.5625,18.4063 508.5625,18.7813 Q508.5625,19.1719 508.2969,19.4063 Q508.0313,19.6406 507.4219,19.6406 L505.7031,19.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="525.25" y="28.7285">IEventHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="459.5" x2="647.5" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="459.5" x2="647.5" y1="47" y2="47"/><polygon fill="#FFFF44" points="469.5,56.3047,473.5,60.3047,469.5,64.3047,465.5,60.3047" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="478.5" y="65.5332">handleEvent(Event event)</text></g><!--MD5=[537c5cb6be412a5811209c18d6a5b6de]
class WorkpieceType--><g id="elem_WorkpieceType"><rect codeLine="5" fill="#F1F1F1" height="136.0469" id="WorkpieceType" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="1429" y="498"/><ellipse cx="1444" cy="514" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1442.8594,514.7969 L1442.8594,517.2969 L1447.1875,517.2969 L1447.1875,516.375 Q1447.1875,515.7656 1447.4219,515.5 Q1447.6719,515.2344 1448.0469,515.2344 Q1448.4219,515.2344 1448.6563,515.5 Q1448.8906,515.7656 1448.8906,516.375 L1448.8906,519 L1440.8906,519 Q1440.2656,519 1440,518.7656 Q1439.75,518.5313 1439.75,518.1406 Q1439.75,517.7656 1440.0156,517.5313 Q1440.2813,517.2969 1440.8906,517.2969 L1441.1563,517.2969 L1441.1563,510.6406 L1440.8906,510.6406 Q1440.2656,510.6406 1440,510.4063 Q1439.75,510.1719 1439.75,509.7813 Q1439.75,509.4063 1440,509.1719 Q1440.2656,508.9375 1440.8906,508.9375 L1448.5156,508.9375 L1448.5156,511.5313 Q1448.5156,512.1406 1448.2813,512.4063 Q1448.0625,512.6563 1447.6719,512.6563 Q1447.2969,512.6563 1447.0625,512.4063 Q1446.8281,512.1406 1446.8281,511.5313 L1446.8281,510.6406 L1442.8594,510.6406 L1442.8594,513.0938 L1444.3438,513.0938 Q1444.3438,512.4375 1444.4688,512.25 Q1444.7344,511.8438 1445.2031,511.8438 Q1445.5781,511.8438 1445.8125,512.1094 Q1446.0469,512.3594 1446.0469,512.9688 L1446.0469,514.9375 Q1446.0469,515.4844 1445.9219,515.6719 Q1445.6563,516.0625 1445.2031,516.0625 Q1444.7344,516.0625 1444.4688,515.6563 Q1444.3438,515.4688 1444.3438,514.7969 L1442.8594,514.7969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1458" y="519.7285">WorkpieceType</text><line style="stroke:#181818;stroke-width:0.5;" x1="1430" x2="1559" y1="530" y2="530"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1435" y="548.5332">WS_UNKNOWN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1435" y="566.1426">WS_F</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1435" y="583.752">WS_OB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1435" y="601.3613">WS_BOM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="1435" y="618.9707">WS_BUM</text><line style="stroke:#181818;stroke-width:0.5;" x1="1430" x2="1559" y1="626.0469" y2="626.0469"/></g><!--MD5=[a64a835c3d62471a77f615251fdde58a]
class Position--><g id="elem_Position"><rect codeLine="13" fill="#F1F1F1" height="294.5313" id="Position" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="1230.5" y="1059"/><ellipse cx="1277.25" cy="1075" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1276.1094,1075.7969 L1276.1094,1078.2969 L1280.4375,1078.2969 L1280.4375,1077.375 Q1280.4375,1076.7656 1280.6719,1076.5 Q1280.9219,1076.2344 1281.2969,1076.2344 Q1281.6719,1076.2344 1281.9063,1076.5 Q1282.1406,1076.7656 1282.1406,1077.375 L1282.1406,1080 L1274.1406,1080 Q1273.5156,1080 1273.25,1079.7656 Q1273,1079.5313 1273,1079.1406 Q1273,1078.7656 1273.2656,1078.5313 Q1273.5313,1078.2969 1274.1406,1078.2969 L1274.4063,1078.2969 L1274.4063,1071.6406 L1274.1406,1071.6406 Q1273.5156,1071.6406 1273.25,1071.4063 Q1273,1071.1719 1273,1070.7813 Q1273,1070.4063 1273.25,1070.1719 Q1273.5156,1069.9375 1274.1406,1069.9375 L1281.7656,1069.9375 L1281.7656,1072.5313 Q1281.7656,1073.1406 1281.5313,1073.4063 Q1281.3125,1073.6563 1280.9219,1073.6563 Q1280.5469,1073.6563 1280.3125,1073.4063 Q1280.0781,1073.1406 1280.0781,1072.5313 L1280.0781,1071.6406 L1276.1094,1071.6406 L1276.1094,1074.0938 L1277.5938,1074.0938 Q1277.5938,1073.4375 1277.7188,1073.25 Q1277.9844,1072.8438 1278.4531,1072.8438 Q1278.8281,1072.8438 1279.0625,1073.1094 Q1279.2969,1073.3594 1279.2969,1073.9688 L1279.2969,1075.9375 Q1279.2969,1076.4844 1279.1719,1076.6719 Q1278.9063,1077.0625 1278.4531,1077.0625 Q1277.9844,1077.0625 1277.7188,1076.6563 Q1277.5938,1076.4688 1277.5938,1075.7969 L1276.1094,1075.7969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1297.75" y="1080.7285">Position</text><line style="stroke:#181818;stroke-width:0.5;" x1="1231.5" x2="1381.5" y1="1091" y2="1091"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1236.5" y="1109.5332">FBM1_START_HM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="1236.5" y="1127.1426">FBM1_HM_MD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1236.5" y="1144.752">FBM1_MD_SW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1236.5" y="1162.3613">FBM1_SW_RAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1236.5" y="1179.9707">FBM1_SORTED_OUT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1236.5" y="1197.5801">FBM1_SW_END</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1236.5" y="1215.1895">FBM1_END</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1236.5" y="1232.7988">FBM2_START_HM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="1236.5" y="1250.4082">FBM2_HM_MD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1236.5" y="1268.0176">FBM2_MD_SW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1236.5" y="1285.627">FBM2_SW_RAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1236.5" y="1303.2363">FBM2_SORTED_OUT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1236.5" y="1320.8457">FBM2_SW_END</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1236.5" y="1338.4551">FBM2_END</text><line style="stroke:#181818;stroke-width:0.5;" x1="1231.5" x2="1381.5" y1="1345.5313" y2="1345.5313"/></g><!--MD5=[19076009f2105540ef54892ae477b9e1]
class Workpiece--><g id="elem_Workpiece"><rect codeLine="30" fill="#F1F1F1" height="206.4844" id="Workpiece" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175" x="1219" y="463"/><ellipse cx="1268.75" cy="479" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1271.5156,474.875 Q1271.6719,474.6563 1271.8594,474.5469 Q1272.0469,474.4375 1272.2656,474.4375 Q1272.6406,474.4375 1272.875,474.7031 Q1273.1094,474.9531 1273.1094,475.5625 L1273.1094,477.0156 Q1273.1094,477.625 1272.875,477.8906 Q1272.6406,478.1563 1272.2656,478.1563 Q1271.9219,478.1563 1271.7188,477.9531 Q1271.5156,477.7656 1271.4063,477.25 Q1271.3594,476.8906 1271.1719,476.7031 Q1270.8438,476.3281 1270.2344,476.1094 Q1269.625,475.8906 1269,475.8906 Q1268.2344,475.8906 1267.5938,476.2188 Q1266.9688,476.5469 1266.4688,477.2969 Q1265.9844,478.0469 1265.9844,479.0781 L1265.9844,480.1719 Q1265.9844,481.4063 1266.875,482.2344 Q1267.7656,483.0469 1269.3594,483.0469 Q1270.2969,483.0469 1270.9531,482.7969 Q1271.3438,482.6406 1271.7656,482.2031 Q1272.0313,481.9375 1272.1719,481.8594 Q1272.3281,481.7813 1272.5313,481.7813 Q1272.8594,481.7813 1273.1094,482.0469 Q1273.375,482.2969 1273.375,482.6406 Q1273.375,482.9844 1273.0313,483.3906 Q1272.5313,483.9688 1271.7344,484.2969 Q1270.6563,484.75 1269.3594,484.75 Q1267.8438,484.75 1266.6406,484.125 Q1265.6563,483.625 1264.9688,482.5625 Q1264.2813,481.4844 1264.2813,480.2031 L1264.2813,479.0469 Q1264.2813,477.7188 1264.8906,476.5781 Q1265.5156,475.4219 1266.6094,474.8125 Q1267.7031,474.1875 1268.9375,474.1875 Q1269.6719,474.1875 1270.3125,474.3594 Q1270.9688,474.5156 1271.5156,474.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1289.25" y="484.7285">Workpiece</text><line style="stroke:#181818;stroke-width:0.5;" x1="1220" x2="1393" y1="495" y2="495"/><ellipse cx="1230" cy="509.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1239" y="513.5332">int id</text><ellipse cx="1230" cy="526.9141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1239" y="531.1426">int heightFBM1</text><ellipse cx="1230" cy="544.5234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1239" y="548.752">bool metalFBM1</text><ellipse cx="1230" cy="562.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1239" y="566.3613">int heightFBM2</text><ellipse cx="1230" cy="579.7422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1239" y="583.9707">bool metalFBM2</text><ellipse cx="1230" cy="597.3516" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1239" y="601.5801">bool flipped</text><ellipse cx="1230" cy="614.9609" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="1239" y="619.1895">Position currentPosition</text><ellipse cx="1230" cy="632.5703" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1239" y="636.7988">WorkpieceType type</text><ellipse cx="1230" cy="650.1797" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1239" y="654.4082">bool valid</text><line style="stroke:#181818;stroke-width:0.5;" x1="1220" x2="1393" y1="661.4844" y2="661.4844"/></g><!--MD5=[5202f3058929cf6811ba564f50d1f312]
class WorkpieceManager--><g id="elem_WorkpieceManager"><rect codeLine="45" fill="#F1F1F1" height="312.1406" id="WorkpieceManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="383" x="801" y="410"/><ellipse cx="926.75" cy="426" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M929.5156,421.875 Q929.6719,421.6563 929.8594,421.5469 Q930.0469,421.4375 930.2656,421.4375 Q930.6406,421.4375 930.875,421.7031 Q931.1094,421.9531 931.1094,422.5625 L931.1094,424.0156 Q931.1094,424.625 930.875,424.8906 Q930.6406,425.1563 930.2656,425.1563 Q929.9219,425.1563 929.7188,424.9531 Q929.5156,424.7656 929.4063,424.25 Q929.3594,423.8906 929.1719,423.7031 Q928.8438,423.3281 928.2344,423.1094 Q927.625,422.8906 927,422.8906 Q926.2344,422.8906 925.5938,423.2188 Q924.9688,423.5469 924.4688,424.2969 Q923.9844,425.0469 923.9844,426.0781 L923.9844,427.1719 Q923.9844,428.4063 924.875,429.2344 Q925.7656,430.0469 927.3594,430.0469 Q928.2969,430.0469 928.9531,429.7969 Q929.3438,429.6406 929.7656,429.2031 Q930.0313,428.9375 930.1719,428.8594 Q930.3281,428.7813 930.5313,428.7813 Q930.8594,428.7813 931.1094,429.0469 Q931.375,429.2969 931.375,429.6406 Q931.375,429.9844 931.0313,430.3906 Q930.5313,430.9688 929.7344,431.2969 Q928.6563,431.75 927.3594,431.75 Q925.8438,431.75 924.6406,431.125 Q923.6563,430.625 922.9688,429.5625 Q922.2813,428.4844 922.2813,427.2031 L922.2813,426.0469 Q922.2813,424.7188 922.8906,423.5781 Q923.5156,422.4219 924.6094,421.8125 Q925.7031,421.1875 926.9375,421.1875 Q927.6719,421.1875 928.3125,421.3594 Q928.9688,421.5156 929.5156,421.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="947.25" y="431.7285">WorkpieceManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="802" x2="1183" y1="442" y2="442"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="809" y="453.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="821" y="460.5332">WorkpieceType[3] desiredOrder</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="809" y="470.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="821" y="478.1426">std::vector&lt;Workpiece&gt; workpieces</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="809" y="488.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="821" y="495.752">int nextID</text><ellipse cx="812" cy="530.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="311" x="821" y="534.9707">Workpiece getWorkpieceByPosition(Position pos)</text><ellipse cx="812" cy="548.3516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="821" y="552.5801">bool sortOutNextWorkpiece()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="802" x2="961" y1="511.6328" y2="511.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="961" y="516.8613">. Getters .</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1024" x2="1183" y1="511.6328" y2="511.6328"/><ellipse cx="812" cy="587.5703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="821" y="591.7988">wpAtStart(bool atMaster)</text><ellipse cx="812" cy="605.1797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211" x="821" y="609.4082">wpAtHeightSensor(bool atMaster)</text><ellipse cx="812" cy="622.7891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="357" x="821" y="627.0176">handleHeightResult(bool atMaster, WorkpieceType type)</text><ellipse cx="812" cy="640.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="313" x="821" y="644.627">handleMetalDetected(bool atMaster, bool isMetal)</text><ellipse cx="812" cy="658.0078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="821" y="662.2363">wpAtSwitch(bool atMaster)</text><ellipse cx="812" cy="675.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="821" y="679.8457">wpAtRamp(bool atMaster)</text><ellipse cx="812" cy="693.2266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="821" y="697.4551">wpAtEnd(bool atMaster)</text><ellipse cx="812" cy="710.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="821" y="715.0645">wpRemoved()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="802" x2="869.5" y1="568.4609" y2="568.4609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="246" x="869.5" y="573.6895">. Handlers for updating workpiece info .</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1115.5" x2="1183" y1="568.4609" y2="568.4609"/></g><!--MD5=[db176b6dd1311b1f93c078a4ff022cdc]
class MainContext--><g id="elem_MainContext"><rect codeLine="65" fill="#F1F1F1" height="866.0313" id="MainContext" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="424" x="341.5" y="133"/><ellipse cx="510.25" cy="149" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M513.0156,144.875 Q513.1719,144.6563 513.3594,144.5469 Q513.5469,144.4375 513.7656,144.4375 Q514.1406,144.4375 514.375,144.7031 Q514.6094,144.9531 514.6094,145.5625 L514.6094,147.0156 Q514.6094,147.625 514.375,147.8906 Q514.1406,148.1563 513.7656,148.1563 Q513.4219,148.1563 513.2188,147.9531 Q513.0156,147.7656 512.9063,147.25 Q512.8594,146.8906 512.6719,146.7031 Q512.3438,146.3281 511.7344,146.1094 Q511.125,145.8906 510.5,145.8906 Q509.7344,145.8906 509.0938,146.2188 Q508.4688,146.5469 507.9688,147.2969 Q507.4844,148.0469 507.4844,149.0781 L507.4844,150.1719 Q507.4844,151.4063 508.375,152.2344 Q509.2656,153.0469 510.8594,153.0469 Q511.7969,153.0469 512.4531,152.7969 Q512.8438,152.6406 513.2656,152.2031 Q513.5313,151.9375 513.6719,151.8594 Q513.8281,151.7813 514.0313,151.7813 Q514.3594,151.7813 514.6094,152.0469 Q514.875,152.2969 514.875,152.6406 Q514.875,152.9844 514.5313,153.3906 Q514.0313,153.9688 513.2344,154.2969 Q512.1563,154.75 510.8594,154.75 Q509.3438,154.75 508.1406,154.125 Q507.1563,153.625 506.4688,152.5625 Q505.7813,151.4844 505.7813,150.2031 L505.7813,149.0469 Q505.7813,147.7188 506.3906,146.5781 Q507.0156,145.4219 508.1094,144.8125 Q509.2031,144.1875 510.4375,144.1875 Q511.1719,144.1875 511.8125,144.3594 Q512.4688,144.5156 513.0156,144.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="530.75" y="154.7285">MainContext</text><line style="stroke:#181818;stroke-width:0.5;" x1="342.5" x2="764.5" y1="165" y2="165"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="349.5" y="176.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="361.5" y="183.5332">MainActions* actions</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="349.5" y="193.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="361.5" y="201.1426">MainContextData* data</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="349.5" y="211.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="361.5" y="218.752">MainBasestate* state</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="349.5" y="229.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="361.5" y="236.3613">WorkpieceManager* wpManager</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="349.5" y="246.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="361.5" y="253.9707">EventManager* eventManager</text><ellipse cx="352.5" cy="267.3516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="361.5" y="271.5801">MainContext(EventManager* mngr)</text><ellipse cx="352.5" cy="284.9609" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="361.5" y="289.1895">handleEvent(Event event)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="349.5" y="299.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="361.5" y="306.7988">subscribeToEvents()</text><ellipse cx="352.5" cy="341.7891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="361.5" y="346.0176">errorOccured()</text><ellipse cx="352.5" cy="359.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="361.5" y="363.627">errorSolved()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="342.5" x2="497.5" y1="322.6797" y2="322.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="497.5" y="327.9082">Handler for errors</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="609.5" x2="764.5" y1="322.6797" y2="322.6797"/><ellipse cx="352.5" cy="398.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="361.5" y="402.8457">master_btnStart_PressedShort()</text><ellipse cx="352.5" cy="416.2266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="361.5" y="420.4551">master_btnStart_PressedLong()</text><ellipse cx="352.5" cy="433.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="361.5" y="438.0645">master_btnStop_Pressed()</text><ellipse cx="352.5" cy="451.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="361.5" y="455.6738">master_btnReset_Pressed()</text><ellipse cx="352.5" cy="469.0547" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="361.5" y="473.2832">master_EStop_Pressed()</text><ellipse cx="352.5" cy="486.6641" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="361.5" y="490.8926">master_EStop_Released()</text><ellipse cx="352.5" cy="504.2734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="361.5" y="508.502">slave_btnStart_PressedShort()</text><ellipse cx="352.5" cy="521.8828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="361.5" y="526.1113">slave_btnStart_PressedLong()</text><ellipse cx="352.5" cy="539.4922" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="361.5" y="543.7207">slave_btnStop_Pressed()</text><ellipse cx="352.5" cy="557.1016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="361.5" y="561.3301">slave_btnReset_Pressed()</text><ellipse cx="352.5" cy="574.7109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="361.5" y="578.9395">slave_EStop_Pressed()</text><ellipse cx="352.5" cy="592.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="361.5" y="596.5488">slave_EStop_Released()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="342.5" x2="473.5" y1="379.5078" y2="379.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="473.5" y="384.7363">Handler for button events</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="633.5" x2="764.5" y1="379.5078" y2="379.5078"/><ellipse cx="352.5" cy="631.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="361.5" y="635.7676">master_LBA_Blocked()</text><ellipse cx="352.5" cy="649.1484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="361.5" y="653.377">master_LBA_Unblocked()</text><ellipse cx="352.5" cy="666.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="361.5" y="670.9863">master_LBW_Blocked()</text><ellipse cx="352.5" cy="684.3672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="361.5" y="688.5957">master_LBW_Unblocked()</text><ellipse cx="352.5" cy="701.9766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="361.5" y="706.2051">master_LBR_Blocked()</text><ellipse cx="352.5" cy="719.5859" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="361.5" y="723.8145">master_LBR_Unblocked()</text><ellipse cx="352.5" cy="737.1953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="361.5" y="741.4238">master_LBE_Blocked()</text><ellipse cx="352.5" cy="754.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="361.5" y="759.0332">master_LBE_Unblocked()</text><ellipse cx="352.5" cy="772.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="398" x="361.5" y="776.6426">master_newHeightResult(WorkpieceType type, float avgHeight)</text><ellipse cx="352.5" cy="790.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="361.5" y="794.252">master_metalDetected()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="342.5" x2="432.5" y1="612.4297" y2="612.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="432.5" y="617.6582">Handler for sensor events from master</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="674.5" x2="764.5" y1="612.4297" y2="612.4297"/><ellipse cx="352.5" cy="829.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="361.5" y="833.4707">slave_LBA_Blocked()</text><ellipse cx="352.5" cy="846.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="361.5" y="851.0801">slave_LBA_Unblocked()</text><ellipse cx="352.5" cy="864.4609" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="361.5" y="868.6895">slave_LBW_Blocked()</text><ellipse cx="352.5" cy="882.0703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155" x="361.5" y="886.2988">slave_LBW_Unblocked()</text><ellipse cx="352.5" cy="899.6797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="361.5" y="903.9082">slave_LBR_Blocked()</text><ellipse cx="352.5" cy="917.2891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="361.5" y="921.5176">slave_LBR_Unblocked()</text><ellipse cx="352.5" cy="934.8984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="361.5" y="939.127">slave_LBE_Blocked()</text><ellipse cx="352.5" cy="952.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="361.5" y="956.7363">slave_LBE_Unblocked()</text><ellipse cx="352.5" cy="970.1172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="398" x="361.5" y="974.3457">master_newHeightResult(WorkpieceType type, float avgHeight)</text><ellipse cx="352.5" cy="987.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="361.5" y="991.9551">slave_metalDetected()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="342.5" x2="437.5" y1="810.1328" y2="810.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="232" x="437.5" y="815.3613">Handler for sensor events from slave</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="669.5" x2="764.5" y1="810.1328" y2="810.1328"/></g><!--MD5=[7245d13eb62e3ce28aef8eb437739e06]
class MainActions--><g id="elem_MainActions"><rect codeLine="116" fill="#F1F1F1" height="435.4063" id="MainActions" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="299" x="7" y="348.5"/><ellipse cx="114.25" cy="364.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M117.0156,360.375 Q117.1719,360.1563 117.3594,360.0469 Q117.5469,359.9375 117.7656,359.9375 Q118.1406,359.9375 118.375,360.2031 Q118.6094,360.4531 118.6094,361.0625 L118.6094,362.5156 Q118.6094,363.125 118.375,363.3906 Q118.1406,363.6563 117.7656,363.6563 Q117.4219,363.6563 117.2188,363.4531 Q117.0156,363.2656 116.9063,362.75 Q116.8594,362.3906 116.6719,362.2031 Q116.3438,361.8281 115.7344,361.6094 Q115.125,361.3906 114.5,361.3906 Q113.7344,361.3906 113.0938,361.7188 Q112.4688,362.0469 111.9688,362.7969 Q111.4844,363.5469 111.4844,364.5781 L111.4844,365.6719 Q111.4844,366.9063 112.375,367.7344 Q113.2656,368.5469 114.8594,368.5469 Q115.7969,368.5469 116.4531,368.2969 Q116.8438,368.1406 117.2656,367.7031 Q117.5313,367.4375 117.6719,367.3594 Q117.8281,367.2813 118.0313,367.2813 Q118.3594,367.2813 118.6094,367.5469 Q118.875,367.7969 118.875,368.1406 Q118.875,368.4844 118.5313,368.8906 Q118.0313,369.4688 117.2344,369.7969 Q116.1563,370.25 114.8594,370.25 Q113.3438,370.25 112.1406,369.625 Q111.1563,369.125 110.4688,368.0625 Q109.7813,366.9844 109.7813,365.7031 L109.7813,364.5469 Q109.7813,363.2188 110.3906,362.0781 Q111.0156,360.9219 112.1094,360.3125 Q113.2031,359.6875 114.4375,359.6875 Q115.1719,359.6875 115.8125,359.8594 Q116.4688,360.0156 117.0156,360.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="134.75" y="370.2285">MainActions</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="305" y1="380.5" y2="380.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="391.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="27" y="399.0332">EventManager* eventManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="305" y1="406.1094" y2="406.1094"/><ellipse cx="18" cy="420.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="27" y="424.6426">MainActions(EventManager* mngr)</text><ellipse cx="18" cy="438.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268" x="27" y="442.252">master_sendMotorStopRequest(bool stop)</text><ellipse cx="18" cy="455.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="27" y="459.8613">master_sendMotorRightRequest(bool right)</text><ellipse cx="18" cy="473.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="258" x="27" y="477.4707">slave_sendMotorStopRequest(bool stop)</text><ellipse cx="18" cy="490.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="263" x="27" y="495.0801">slave_sendMotorRightRequest(bool right)</text><ellipse cx="18" cy="508.4609" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="27" y="512.6895">setStandbyMode()</text><ellipse cx="18" cy="526.0703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="27" y="530.2988">setRunningMode()</text><ellipse cx="18" cy="543.6797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="27" y="547.9082">setServiceMode()</text><ellipse cx="18" cy="561.2891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="27" y="565.5176">setErrorMode()</text><ellipse cx="18" cy="578.8984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="27" y="583.127">setEStopMode()</text><ellipse cx="18" cy="596.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="27" y="600.7363">allActuatorsOn()</text><ellipse cx="18" cy="614.1172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="27" y="618.3457">allActuatorsOff()</text><ellipse cx="18" cy="631.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="27" y="635.9551">displayWarning()</text><ellipse cx="18" cy="649.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="27" y="653.5645">warningOff()</text><ellipse cx="18" cy="666.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="27" y="671.1738">calibrateOffset()</text><ellipse cx="18" cy="684.5547" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="27" y="688.7832">calibrateReference()</text><ellipse cx="18" cy="702.1641" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="27" y="706.3926">saveCalibration()</text><ellipse cx="18" cy="719.7734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="27" y="724.002">btnStartLedOn()</text><ellipse cx="18" cy="737.3828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="27" y="741.6113">btnStartLedOff()</text><ellipse cx="18" cy="754.9922" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="27" y="759.2207">btnResetLedOn()</text><ellipse cx="18" cy="772.6016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="27" y="776.8301">btnResetLedOff()</text></g><!--MD5=[94edf0c28651990ddb14e5c00fbbcfb8]
reverse link Workpiece to Position--><g id="link_Workpiece_Position"><path codeLine="42" d="M1306.5,682.49 C1306.5,788.04 1306.5,944.65 1306.5,1058.98 " fill="none" id="Workpiece-backto-Position" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1306.5,669.23,1302.5,675.23,1306.5,681.23,1310.5,675.23,1306.5,669.23" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2c025a8dfd63739b0c192a16aaba496c]
reverse link Workpiece to WorkpieceType--><g id="link_Workpiece_WorkpieceType"><path codeLine="43" d="M1407.45,566 C1414.54,566 1421.63,566 1428.72,566 " fill="none" id="Workpiece-backto-WorkpieceType" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1394.26,566,1400.26,570,1406.26,566,1400.26,562,1394.26,566" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e5e603836322f008877b7f6dc0f8e9c7]
reverse link WorkpieceManager to Workpiece--><g id="link_WorkpieceManager_Workpiece"><path codeLine="63" d="M1197.32,566 C1204.4,566 1211.48,566 1218.56,566 " fill="none" id="WorkpieceManager-backto-Workpiece" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1184.15,566,1190.15,570,1196.15,566,1190.15,562,1184.15,566" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[77593f15cc68affda095bc127de63565]
link MainActions to MainContext--><g id="link_MainActions_MainContext"><path codeLine="114" d="M306.15,566 C313.5,566 320.84,566 328.19,566 " fill="none" id="MainActions-to-MainContext" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="341.42,566,335.42,562,329.42,566,335.42,570,341.42,566" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a2f6ededda24cc13628cf4f51162ac29]
reverse link IEventHandler to MainContext--><g id="link_IEventHandler_MainContext"><path codeLine="141" d="M553.5,93.68 C553.5,105.29 553.5,118.47 553.5,132.85 " fill="none" id="IEventHandler-backto-MainContext" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="546.5,93.38,553.5,73.38,560.5,93.38,546.5,93.38" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[61d780897c32a0027712a12e7168a1ce]
reverse link MainContext to WorkpieceManager--><g id="link_MainContext_WorkpieceManager"><path codeLine="142" d="M778.83,566 C786.12,566 793.41,566 800.7,566 " fill="none" id="MainContext-backto-WorkpieceManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="765.71,566,771.71,570,777.71,566,771.71,562,765.71,566" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[67f5807a5268a393eec07cb7731fbeaa]
@startuml
interface IEventHandler {
  #handleEvent(Event event)
}

enum WorkpieceType {
  WS_UNKNOWN
  WS_F
  WS_OB
  WS_BOM
  WS_BUM
}

enum Position {
  FBM1_START_HM
  FBM1_HM_MD
  FBM1_MD_SW
  FBM1_SW_RAMP
  FBM1_SORTED_OUT
  FBM1_SW_END
  FBM1_END
  FBM2_START_HM
  FBM2_HM_MD
  FBM2_MD_SW
  FBM2_SW_RAMP
  FBM2_SORTED_OUT
  FBM2_SW_END
  FBM2_END
}

class Workpiece {
  +int id
  +int heightFBM1
  +bool metalFBM1
  +int heightFBM2
  +bool metalFBM2
  +bool flipped
  +Position currentPosition
  +WorkpieceType type
  +bool valid
}

Workpiece *- - Position
Workpiece *- WorkpieceType

class WorkpieceManager {
  -WorkpieceType[3] desiredOrder
  -std::vector<Workpiece> workpieces
  -int nextID
  ... Getters ...
  +Workpiece getWorkpieceByPosition(Position pos)
  +bool sortOutNextWorkpiece()
  ... Handlers for updating workpiece info ...
  +wpAtStart(bool atMaster)
  +wpAtHeightSensor(bool atMaster)
  +handleHeightResult(bool atMaster, WorkpieceType type)
  +handleMetalDetected(bool atMaster, bool isMetal)
  +wpAtSwitch(bool atMaster)
  +wpAtRamp(bool atMaster)
  +wpAtEnd(bool atMaster)
  +wpRemoved()
}

WorkpieceManager o- Workpiece

class MainContext {
  -MainActions* actions
	-MainContextData* data
	-MainBasestate* state
  -WorkpieceManager* wpManager
  -EventManager* eventManager
  +MainContext(EventManager* mngr)
  +handleEvent(Event event)
  -subscribeToEvents()
  .. Handler for errors ..
  +errorOccured()
  +errorSolved()
  .. Handler for button events ..
  +master_btnStart_PressedShort()
  +master_btnStart_PressedLong()
  +master_btnStop_Pressed()
  +master_btnReset_Pressed()
  +master_EStop_Pressed()
	+master_EStop_Released()
  +slave_btnStart_PressedShort()
  +slave_btnStart_PressedLong()
  +slave_btnStop_Pressed()
  +slave_btnReset_Pressed()
  +slave_EStop_Pressed()
	+slave_EStop_Released()
  .. Handler for sensor events from master ..
  +master_LBA_Blocked()
  +master_LBA_Unblocked()
  +master_LBW_Blocked()
  +master_LBW_Unblocked()
  +master_LBR_Blocked()
  +master_LBR_Unblocked()
  +master_LBE_Blocked()
  +master_LBE_Unblocked()
  +master_newHeightResult(WorkpieceType type, float avgHeight)
  +master_metalDetected()
  .. Handler for sensor events from slave ..
  +slave_LBA_Blocked()
  +slave_LBA_Unblocked()
  +slave_LBW_Blocked()
  +slave_LBW_Unblocked()
  +slave_LBR_Blocked()
  +slave_LBR_Unblocked()
  +slave_LBE_Blocked()
  +slave_LBE_Unblocked()
  +master_newHeightResult(WorkpieceType type, float avgHeight)
  +slave_metalDetected()
}

MainActions -o MainContext

class MainActions {
  -EventManager* eventManager
  +MainActions(EventManager* mngr)
	+master_sendMotorStopRequest(bool stop)
	+master_sendMotorRightRequest(bool right)
	+slave_sendMotorStopRequest(bool stop)
	+slave_sendMotorRightRequest(bool right)
	+setStandbyMode()
	+setRunningMode()
	+setServiceMode()
	+setErrorMode()
	+setEStopMode()
	+allActuatorsOn()
	+allActuatorsOff()
	+displayWarning()
	+warningOff()
	+calibrateOffset()
	+calibrateReference()
	+saveCalibration()
	+btnStartLedOn()
	+btnStartLedOff()
	+btnResetLedOn()
	+btnResetLedOff()
}

IEventHandler <|.. MainContext
MainContext o- WorkpieceManager


@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>