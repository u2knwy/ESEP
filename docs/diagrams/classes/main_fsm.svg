<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1162px" preserveAspectRatio="none" style="width:1075px;height:1162px;background:#FFFFFF;" version="1.1" viewBox="0 0 1075 1162" width="1075px" zoomAndPan="magnify"><defs/><g><!--MD5=[8574b24f32bb9fcb0a100948d7d93e6b]
class IEventHandler--><g id="elem_IEventHandler"><rect codeLine="1" fill="#F1F1F1" height="65.6094" id="IEventHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="59.5" y="15.5"/><ellipse cx="85.3" cy="31.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M86.2531,28.1406 L86.2531,34.7969 L87.9719,34.7969 Q88.5813,34.7969 88.8469,35.0313 Q89.1125,35.2656 89.1125,35.6563 Q89.1125,36.0313 88.8469,36.2656 Q88.5813,36.5 87.9719,36.5 L82.8313,36.5 Q82.2219,36.5 81.9563,36.2656 Q81.6906,36.0313 81.6906,35.6406 Q81.6906,35.2656 81.9563,35.0313 Q82.2219,34.7969 82.8313,34.7969 L84.55,34.7969 L84.55,28.1406 L82.8313,28.1406 Q82.2219,28.1406 81.9563,27.9063 Q81.6906,27.6719 81.6906,27.2813 Q81.6906,26.9063 81.9563,26.6719 Q82.2219,26.4375 82.8313,26.4375 L87.9719,26.4375 Q88.5813,26.4375 88.8469,26.6719 Q89.1125,26.9063 89.1125,27.2813 Q89.1125,27.6719 88.8469,27.9063 Q88.5813,28.1406 87.9719,28.1406 L86.2531,28.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="101.7" y="37.2285">IEventHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="60.5" x2="203.5" y1="47.5" y2="47.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="60.5" x2="203.5" y1="55.5" y2="55.5"/><polygon fill="#FFFF44" points="70.5,64.8047,74.5,68.8047,70.5,72.8047,66.5,68.8047" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="79.5" y="74.0332">notify(Event event)</text></g><!--MD5=[537c5cb6be412a5811209c18d6a5b6de]
class WorkpieceType--><g id="elem_WorkpieceType"><rect codeLine="5" fill="#F1F1F1" height="118.4375" id="WorkpieceType" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="937.5" y="416.5"/><ellipse cx="952.5" cy="432.5" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M951.3594,433.2969 L951.3594,435.7969 L955.6875,435.7969 L955.6875,434.875 Q955.6875,434.2656 955.9219,434 Q956.1719,433.7344 956.5469,433.7344 Q956.9219,433.7344 957.1563,434 Q957.3906,434.2656 957.3906,434.875 L957.3906,437.5 L949.3906,437.5 Q948.7656,437.5 948.5,437.2656 Q948.25,437.0313 948.25,436.6406 Q948.25,436.2656 948.5156,436.0313 Q948.7813,435.7969 949.3906,435.7969 L949.6563,435.7969 L949.6563,429.1406 L949.3906,429.1406 Q948.7656,429.1406 948.5,428.9063 Q948.25,428.6719 948.25,428.2813 Q948.25,427.9063 948.5,427.6719 Q948.7656,427.4375 949.3906,427.4375 L957.0156,427.4375 L957.0156,430.0313 Q957.0156,430.6406 956.7813,430.9063 Q956.5625,431.1563 956.1719,431.1563 Q955.7969,431.1563 955.5625,430.9063 Q955.3281,430.6406 955.3281,430.0313 L955.3281,429.1406 L951.3594,429.1406 L951.3594,431.5938 L952.8438,431.5938 Q952.8438,430.9375 952.9688,430.75 Q953.2344,430.3438 953.7031,430.3438 Q954.0781,430.3438 954.3125,430.6094 Q954.5469,430.8594 954.5469,431.4688 L954.5469,433.4375 Q954.5469,433.9844 954.4219,434.1719 Q954.1563,434.5625 953.7031,434.5625 Q953.2344,434.5625 952.9688,434.1563 Q952.8438,433.9688 952.8438,433.2969 L951.3594,433.2969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="966.5" y="438.2285">WorkpieceType</text><line style="stroke:#181818;stroke-width:0.5;" x1="938.5" x2="1067.5" y1="448.5" y2="448.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="943.5" y="467.0332">UNKNOWN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="943.5" y="484.6426">TYPE_A</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="943.5" y="502.252">TYPE_B</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="943.5" y="519.8613">TYPE_C</text><line style="stroke:#181818;stroke-width:0.5;" x1="938.5" x2="1067.5" y1="526.9375" y2="526.9375"/></g><!--MD5=[a64a835c3d62471a77f615251fdde58a]
class Position--><g id="elem_Position"><rect codeLine="12" fill="#F1F1F1" height="294.5313" id="Position" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="739" y="861"/><ellipse cx="785.75" cy="877" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M784.6094,877.7969 L784.6094,880.2969 L788.9375,880.2969 L788.9375,879.375 Q788.9375,878.7656 789.1719,878.5 Q789.4219,878.2344 789.7969,878.2344 Q790.1719,878.2344 790.4063,878.5 Q790.6406,878.7656 790.6406,879.375 L790.6406,882 L782.6406,882 Q782.0156,882 781.75,881.7656 Q781.5,881.5313 781.5,881.1406 Q781.5,880.7656 781.7656,880.5313 Q782.0313,880.2969 782.6406,880.2969 L782.9063,880.2969 L782.9063,873.6406 L782.6406,873.6406 Q782.0156,873.6406 781.75,873.4063 Q781.5,873.1719 781.5,872.7813 Q781.5,872.4063 781.75,872.1719 Q782.0156,871.9375 782.6406,871.9375 L790.2656,871.9375 L790.2656,874.5313 Q790.2656,875.1406 790.0313,875.4063 Q789.8125,875.6563 789.4219,875.6563 Q789.0469,875.6563 788.8125,875.4063 Q788.5781,875.1406 788.5781,874.5313 L788.5781,873.6406 L784.6094,873.6406 L784.6094,876.0938 L786.0938,876.0938 Q786.0938,875.4375 786.2188,875.25 Q786.4844,874.8438 786.9531,874.8438 Q787.3281,874.8438 787.5625,875.1094 Q787.7969,875.3594 787.7969,875.9688 L787.7969,877.9375 Q787.7969,878.4844 787.6719,878.6719 Q787.4063,879.0625 786.9531,879.0625 Q786.4844,879.0625 786.2188,878.6563 Q786.0938,878.4688 786.0938,877.7969 L784.6094,877.7969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="806.25" y="882.7285">Position</text><line style="stroke:#181818;stroke-width:0.5;" x1="740" x2="890" y1="893" y2="893"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="745" y="911.5332">FBM1_START_HM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="745" y="929.1426">FBM1_HM_MD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="745" y="946.752">FBM1_MD_SW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="745" y="964.3613">FBM1_SW_RAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="745" y="981.9707">FBM1_SORTED_OUT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="745" y="999.5801">FBM1_SW_END</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="745" y="1017.1895">FBM1_END</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="745" y="1034.7988">FBM2_START_HM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="745" y="1052.4082">FBM2_HM_MD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="745" y="1070.0176">FBM2_MD_SW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="745" y="1087.627">FBM2_SW_RAMP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="745" y="1105.2363">FBM2_SORTED_OUT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="745" y="1122.8457">FBM2_SW_END</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="745" y="1140.4551">FBM2_END</text><line style="stroke:#181818;stroke-width:0.5;" x1="740" x2="890" y1="1147.5313" y2="1147.5313"/></g><!--MD5=[19076009f2105540ef54892ae477b9e1]
class Workpiece--><g id="elem_Workpiece"><rect codeLine="29" fill="#F1F1F1" height="206.4844" id="Workpiece" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175" x="727.5" y="372.5"/><ellipse cx="777.25" cy="388.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M780.0156,384.375 Q780.1719,384.1563 780.3594,384.0469 Q780.5469,383.9375 780.7656,383.9375 Q781.1406,383.9375 781.375,384.2031 Q781.6094,384.4531 781.6094,385.0625 L781.6094,386.5156 Q781.6094,387.125 781.375,387.3906 Q781.1406,387.6563 780.7656,387.6563 Q780.4219,387.6563 780.2188,387.4531 Q780.0156,387.2656 779.9063,386.75 Q779.8594,386.3906 779.6719,386.2031 Q779.3438,385.8281 778.7344,385.6094 Q778.125,385.3906 777.5,385.3906 Q776.7344,385.3906 776.0938,385.7188 Q775.4688,386.0469 774.9688,386.7969 Q774.4844,387.5469 774.4844,388.5781 L774.4844,389.6719 Q774.4844,390.9063 775.375,391.7344 Q776.2656,392.5469 777.8594,392.5469 Q778.7969,392.5469 779.4531,392.2969 Q779.8438,392.1406 780.2656,391.7031 Q780.5313,391.4375 780.6719,391.3594 Q780.8281,391.2813 781.0313,391.2813 Q781.3594,391.2813 781.6094,391.5469 Q781.875,391.7969 781.875,392.1406 Q781.875,392.4844 781.5313,392.8906 Q781.0313,393.4688 780.2344,393.7969 Q779.1563,394.25 777.8594,394.25 Q776.3438,394.25 775.1406,393.625 Q774.1563,393.125 773.4688,392.0625 Q772.7813,390.9844 772.7813,389.7031 L772.7813,388.5469 Q772.7813,387.2188 773.3906,386.0781 Q774.0156,384.9219 775.1094,384.3125 Q776.2031,383.6875 777.4375,383.6875 Q778.1719,383.6875 778.8125,383.8594 Q779.4688,384.0156 780.0156,384.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="797.75" y="394.2285">Workpiece</text><line style="stroke:#181818;stroke-width:0.5;" x1="728.5" x2="901.5" y1="404.5" y2="404.5"/><ellipse cx="738.5" cy="418.8047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="747.5" y="423.0332">int id</text><ellipse cx="738.5" cy="436.4141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="747.5" y="440.6426">int heightFBM1</text><ellipse cx="738.5" cy="454.0234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="747.5" y="458.252">bool metalFBM1</text><ellipse cx="738.5" cy="471.6328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="747.5" y="475.8613">int heightFBM2</text><ellipse cx="738.5" cy="489.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="747.5" y="493.4707">bool metalFBM2</text><ellipse cx="738.5" cy="506.8516" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="747.5" y="511.0801">bool flipped</text><ellipse cx="738.5" cy="524.4609" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="747.5" y="528.6895">Position currentPosition</text><ellipse cx="738.5" cy="542.0703" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="747.5" y="546.2988">WorkpieceType type</text><ellipse cx="738.5" cy="559.6797" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="747.5" y="563.9082">bool valid</text><line style="stroke:#181818;stroke-width:0.5;" x1="728.5" x2="901.5" y1="570.9844" y2="570.9844"/></g><!--MD5=[1029619536c715b0a9702eef8246b000]
class SystemType--><g id="elem_SystemType"><rect codeLine="44" fill="#F1F1F1" height="83.2188" id="SystemType" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="437" y="7"/><ellipse cx="452" cy="23" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M450.8594,23.7969 L450.8594,26.2969 L455.1875,26.2969 L455.1875,25.375 Q455.1875,24.7656 455.4219,24.5 Q455.6719,24.2344 456.0469,24.2344 Q456.4219,24.2344 456.6563,24.5 Q456.8906,24.7656 456.8906,25.375 L456.8906,28 L448.8906,28 Q448.2656,28 448,27.7656 Q447.75,27.5313 447.75,27.1406 Q447.75,26.7656 448.0156,26.5313 Q448.2813,26.2969 448.8906,26.2969 L449.1563,26.2969 L449.1563,19.6406 L448.8906,19.6406 Q448.2656,19.6406 448,19.4063 Q447.75,19.1719 447.75,18.7813 Q447.75,18.4063 448,18.1719 Q448.2656,17.9375 448.8906,17.9375 L456.5156,17.9375 L456.5156,20.5313 Q456.5156,21.1406 456.2813,21.4063 Q456.0625,21.6563 455.6719,21.6563 Q455.2969,21.6563 455.0625,21.4063 Q454.8281,21.1406 454.8281,20.5313 L454.8281,19.6406 L450.8594,19.6406 L450.8594,22.0938 L452.3438,22.0938 Q452.3438,21.4375 452.4688,21.25 Q452.7344,20.8438 453.2031,20.8438 Q453.5781,20.8438 453.8125,21.1094 Q454.0469,21.3594 454.0469,21.9688 L454.0469,23.9375 Q454.0469,24.4844 453.9219,24.6719 Q453.6563,25.0625 453.2031,25.0625 Q452.7344,25.0625 452.4688,24.6563 Q452.3438,24.4688 452.3438,23.7969 L450.8594,23.7969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="466" y="28.7285">SystemType</text><line style="stroke:#181818;stroke-width:0.5;" x1="438" x2="546" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="443" y="57.5332">MASTER</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="443" y="75.1426">SLAVE</text><line style="stroke:#181818;stroke-width:0.5;" x1="438" x2="546" y1="82.2188" y2="82.2188"/></g><!--MD5=[5202f3058929cf6811ba564f50d1f312]
class WorkpieceManager--><g id="elem_WorkpieceManager"><rect codeLine="49" fill="#F1F1F1" height="312.1406" id="WorkpieceManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="400" x="292" y="319.5"/><ellipse cx="426.25" cy="335.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M429.0156,331.375 Q429.1719,331.1563 429.3594,331.0469 Q429.5469,330.9375 429.7656,330.9375 Q430.1406,330.9375 430.375,331.2031 Q430.6094,331.4531 430.6094,332.0625 L430.6094,333.5156 Q430.6094,334.125 430.375,334.3906 Q430.1406,334.6563 429.7656,334.6563 Q429.4219,334.6563 429.2188,334.4531 Q429.0156,334.2656 428.9063,333.75 Q428.8594,333.3906 428.6719,333.2031 Q428.3438,332.8281 427.7344,332.6094 Q427.125,332.3906 426.5,332.3906 Q425.7344,332.3906 425.0938,332.7188 Q424.4688,333.0469 423.9688,333.7969 Q423.4844,334.5469 423.4844,335.5781 L423.4844,336.6719 Q423.4844,337.9063 424.375,338.7344 Q425.2656,339.5469 426.8594,339.5469 Q427.7969,339.5469 428.4531,339.2969 Q428.8438,339.1406 429.2656,338.7031 Q429.5313,338.4375 429.6719,338.3594 Q429.8281,338.2813 430.0313,338.2813 Q430.3594,338.2813 430.6094,338.5469 Q430.875,338.7969 430.875,339.1406 Q430.875,339.4844 430.5313,339.8906 Q430.0313,340.4688 429.2344,340.7969 Q428.1563,341.25 426.8594,341.25 Q425.3438,341.25 424.1406,340.625 Q423.1563,340.125 422.4688,339.0625 Q421.7813,337.9844 421.7813,336.7031 L421.7813,335.5469 Q421.7813,334.2188 422.3906,333.0781 Q423.0156,331.9219 424.1094,331.3125 Q425.2031,330.6875 426.4375,330.6875 Q427.1719,330.6875 427.8125,330.8594 Q428.4688,331.0156 429.0156,331.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="446.75" y="341.2285">WorkpieceManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="293" x2="691" y1="351.5" y2="351.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="300" y="362.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="312" y="370.0332">WorkpieceType[3] desiredOrder</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="300" y="380.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="312" y="387.6426">std::vector&lt;Workpiece&gt; workpieces</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="300" y="398.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="312" y="405.252">int nextID</text><ellipse cx="303" cy="440.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="311" x="312" y="444.4707">Workpiece getWorkpieceByPosition(Position pos)</text><ellipse cx="303" cy="457.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="312" y="462.0801">bool sortOutNextWorkpiece()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="293" x2="460.5" y1="421.1328" y2="421.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="460.5" y="426.3613">. Getters .</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="523.5" x2="691" y1="421.1328" y2="421.1328"/><ellipse cx="303" cy="497.0703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="312" y="501.2988">wpAtStart(SystemType sys)</text><ellipse cx="303" cy="514.6797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="228" x="312" y="518.9082">wpAtHeightSensor(SystemType sys)</text><ellipse cx="303" cy="532.2891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="374" x="312" y="536.5176">handleHeightResult(SystemType sys, WorkpieceType type)</text><ellipse cx="303" cy="549.8984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="330" x="312" y="554.127">handleMetalDetected(SystemType sys, bool isMetal)</text><ellipse cx="303" cy="567.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="312" y="571.7363">wpAtSwitch(SystemType sys)</text><ellipse cx="303" cy="585.1172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="312" y="589.3457">wpAtRamp(SystemType sys)</text><ellipse cx="303" cy="602.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="312" y="606.9551">wpAtEnd(SystemType sys)</text><ellipse cx="303" cy="620.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="312" y="624.5645">wpRemoved()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="293" x2="369" y1="477.9609" y2="477.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="246" x="369" y="483.1895">. Handlers for updating workpiece info .</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="615" x2="691" y1="477.9609" y2="477.9609"/></g><!--MD5=[06dc4cff1807364324b7ab668f2cc881]
class MainFSM--><g id="elem_MainFSM"><rect codeLine="70" fill="#F1F1F1" height="650.7188" id="MainFSM" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="250" x="7" y="150"/><ellipse cx="98.25" cy="166" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M101.0156,161.875 Q101.1719,161.6563 101.3594,161.5469 Q101.5469,161.4375 101.7656,161.4375 Q102.1406,161.4375 102.375,161.7031 Q102.6094,161.9531 102.6094,162.5625 L102.6094,164.0156 Q102.6094,164.625 102.375,164.8906 Q102.1406,165.1563 101.7656,165.1563 Q101.4219,165.1563 101.2188,164.9531 Q101.0156,164.7656 100.9063,164.25 Q100.8594,163.8906 100.6719,163.7031 Q100.3438,163.3281 99.7344,163.1094 Q99.125,162.8906 98.5,162.8906 Q97.7344,162.8906 97.0938,163.2188 Q96.4688,163.5469 95.9688,164.2969 Q95.4844,165.0469 95.4844,166.0781 L95.4844,167.1719 Q95.4844,168.4063 96.375,169.2344 Q97.2656,170.0469 98.8594,170.0469 Q99.7969,170.0469 100.4531,169.7969 Q100.8438,169.6406 101.2656,169.2031 Q101.5313,168.9375 101.6719,168.8594 Q101.8281,168.7813 102.0313,168.7813 Q102.3594,168.7813 102.6094,169.0469 Q102.875,169.2969 102.875,169.6406 Q102.875,169.9844 102.5313,170.3906 Q102.0313,170.9688 101.2344,171.2969 Q100.1563,171.75 98.8594,171.75 Q97.3438,171.75 96.1406,171.125 Q95.1563,170.625 94.4688,169.5625 Q93.7813,168.4844 93.7813,167.2031 L93.7813,166.0469 Q93.7813,164.7188 94.3906,163.5781 Q95.0156,162.4219 96.1094,161.8125 Q97.2031,161.1875 98.4375,161.1875 Q99.1719,161.1875 99.8125,161.3594 Q100.4688,161.5156 101.0156,161.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="118.75" y="171.7285">MainFSM</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="256" y1="182" y2="182"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="193.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="27" y="200.5332">WorkpieceManager* wpManager</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="210.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="27" y="218.1426">EventManager* eventManager</text><ellipse cx="18" cy="231.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="27" y="235.752">notify(Event event)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="267.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="27" y="274.9707">startPressedShort()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="285.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="27" y="292.5801">startPressedLong()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="302.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="27" y="310.1895">stopPressed()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="320.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="27" y="327.7988">resetPressed()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="338.1797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="27" y="345.4082">estopPressedFBM1()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="355.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="27" y="363.0176">estopPressedFBM2()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="373.3984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="27" y="380.627">errorOccured()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="391.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="27" y="398.2363">errorSolved()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="52" y1="251.6328" y2="251.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="52" y="256.8613">Handler for button events</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="212" x2="256" y1="251.6328" y2="251.6328"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="430.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="27" y="437.4551">master_lb1Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="447.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="27" y="455.0645">master_lb1Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="465.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="27" y="472.6738">master_lb2Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="483.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="27" y="490.2832">master_lb2Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="500.6641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="27" y="507.8926">master_lb3Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="518.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="27" y="525.502">master_lb3Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="535.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="27" y="543.1113">master_lb4Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="553.4922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="27" y="560.7207">master_lb4Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="571.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="27" y="578.3301">master_metalDetected()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="588.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207" x="27" y="595.9395">master_newHeightResult(int mm)</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="11" y1="414.1172" y2="414.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="11" y="419.3457">Handler for sensor events from master</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="253" x2="256" y1="414.1172" y2="414.1172"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="627.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="27" y="635.1582">slave_lb1Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="645.5391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="27" y="652.7676">slave_lb1Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="663.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="27" y="670.377">slave_lb2Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="680.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="27" y="687.9863">slave_lb2Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="698.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="27" y="705.5957">slave_lb3Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="715.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="27" y="723.2051">slave_lb3Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="733.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="27" y="740.8145">slave_lb4Blocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="751.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="27" y="758.4238">slave_lb4Unblocked()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="768.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="27" y="776.0332">slave_metalDetected()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="786.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="27" y="793.6426">slave_newHeightResult(int mm)</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="16" y1="611.8203" y2="611.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="232" x="16" y="617.0488">Handler for sensor events from slave</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="248" x2="256" y1="611.8203" y2="611.8203"/></g><!--MD5=[94edf0c28651990ddb14e5c00fbbcfb8]
reverse link Workpiece to Position--><g id="link_Workpiece_Position"><path codeLine="41" d="M815,591.98 C815,670.86 815,776.04 815,860.84 " fill="none" id="Workpiece-backto-Position" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="815,578.57,811,584.57,815,590.57,819,584.57,815,578.57" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2c025a8dfd63739b0c192a16aaba496c]
reverse link Workpiece to WorkpieceType--><g id="link_Workpiece_WorkpieceType"><path codeLine="42" d="M915.95,475.5 C923.04,475.5 930.13,475.5 937.22,475.5 " fill="none" id="Workpiece-backto-WorkpieceType" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="902.76,475.5,908.76,479.5,914.76,475.5,908.76,471.5,902.76,475.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e5e603836322f008877b7f6dc0f8e9c7]
reverse link WorkpieceManager to Workpiece--><g id="link_WorkpieceManager_Workpiece"><path codeLine="67" d="M705.42,475.5 C712.71,475.5 720,475.5 727.29,475.5 " fill="none" id="WorkpieceManager-backto-Workpiece" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="692.3,475.5,698.3,479.5,704.3,475.5,698.3,471.5,692.3,475.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cb9b43e0584719c18a53ebf7207e2e26]
link SystemType to WorkpieceManager--><g id="link_SystemType_WorkpieceManager"><path codeLine="68" d="M492,90.25 C492,142.81 492,237.25 492,319.35 " fill="none" id="SystemType-WorkpieceManager" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[89546174bc805903e36a5a959b301271]
reverse link IEventHandler to MainFSM--><g id="link_IEventHandler_MainFSM"><path codeLine="107" d="M132,101.91 C132,115.95 132,132.2 132,149.91 " fill="none" id="IEventHandler-backto-MainFSM" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="125,101.79,132,81.79,139,101.79,125,101.79" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8045094768056b40a5d0c7712562eefd]
reverse link MainFSM to WorkpieceManager--><g id="link_MainFSM_WorkpieceManager"><path codeLine="108" d="M270.33,475.5 C277.4,475.5 284.48,475.5 291.56,475.5 " fill="none" id="MainFSM-backto-WorkpieceManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="257.16,475.5,263.16,479.5,269.16,475.5,263.16,471.5,257.16,475.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[210769aabb3153d7dd5739a71400f782]
@startuml
interface IEventHandler {
  #notify(Event event)
}

enum WorkpieceType {
  UNKNOWN
  TYPE_A
  TYPE_B
  TYPE_C
}

enum Position {
  FBM1_START_HM
  FBM1_HM_MD
  FBM1_MD_SW
  FBM1_SW_RAMP
  FBM1_SORTED_OUT
  FBM1_SW_END
  FBM1_END
  FBM2_START_HM
  FBM2_HM_MD
  FBM2_MD_SW
  FBM2_SW_RAMP
  FBM2_SORTED_OUT
  FBM2_SW_END
  FBM2_END
}

class Workpiece {
  +int id
  +int heightFBM1
  +bool metalFBM1
  +int heightFBM2
  +bool metalFBM2
  +bool flipped
  +Position currentPosition
  +WorkpieceType type
  +bool valid
}

Workpiece *- - Position
Workpiece *- WorkpieceType

enum SystemType {
  MASTER
  SLAVE
}

class WorkpieceManager {
  -WorkpieceType[3] desiredOrder
  -std::vector<Workpiece> workpieces
  -int nextID
  ... Getters ...
  +Workpiece getWorkpieceByPosition(Position pos)
  +bool sortOutNextWorkpiece()
  ... Handlers for updating workpiece info ...
  +wpAtStart(SystemType sys)
  +wpAtHeightSensor(SystemType sys)
  +handleHeightResult(SystemType sys, WorkpieceType type)
  +handleMetalDetected(SystemType sys, bool isMetal)
  +wpAtSwitch(SystemType sys)
  +wpAtRamp(SystemType sys)
  +wpAtEnd(SystemType sys)
  +wpRemoved()
}

WorkpieceManager o- Workpiece
SystemType .. WorkpieceManager

class MainFSM {
  -WorkpieceManager* wpManager
  -EventManager* eventManager
  +notify(Event event)
  .. Handler for button events ..
  -startPressedShort()
  -startPressedLong()
  -stopPressed()
  -resetPressed()
  -estopPressedFBM1()
  -estopPressedFBM2()
  -errorOccured()
  -errorSolved()
  .. Handler for sensor events from master ..
  -master_lb1Blocked()
  -master_lb1Unblocked()
  -master_lb2Blocked()
  -master_lb2Unblocked()
  -master_lb3Blocked()
  -master_lb3Unblocked()
  -master_lb4Blocked()
  -master_lb4Unblocked()
  -master_metalDetected()
  -master_newHeightResult(int mm)
  .. Handler for sensor events from slave ..
  -slave_lb1Blocked()
  -slave_lb1Unblocked()
  -slave_lb2Blocked()
  -slave_lb2Unblocked()
  -slave_lb3Blocked()
  -slave_lb3Unblocked()
  -slave_lb4Blocked()
  -slave_lb4Unblocked()
  -slave_metalDetected()
  -slave_newHeightResult(int mm)
}

IEventHandler <|.. MainFSM
MainFSM o- WorkpieceManager


@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>